<div class="container">
    
    <div class="card">
        <h2>ğŸ“Š è¡€å£“ç´€éŒ„èˆ‡æ™ºèƒ½åˆ†æ</h2>
        <p style="font-size: 16px; color: #666;">è«‹è¼¸å…¥æ‚¨çš„è¡€å£“æ•¸å€¼ï¼Œç³»çµ±å°‡è‡ªå‹•ç‚ºæ‚¨ç”Ÿæˆå€‹äººåŒ–é£²é£Ÿå»ºè­°ã€‚</p>
        
        <div class="grid" style="background: #f0f4f8; padding: 20px; border-radius: 10px;">
            <div>
                <label>æ”¶ç¸®å£“ (é«˜å£“):</label>
                <input type="number" id="sys" placeholder="ä¾‹å¦‚: 125" style="width: 80%; padding: 10px; font-size: 18px;">
            </div>
            <div>
                <label>èˆ’å¼µå£“ (ä½å£“):</label>
                <input type="number" id="dia" placeholder="ä¾‹å¦‚: 85" style="width: 80%; padding: 10px; font-size: 18px;">
            </div>
            <div style="display: flex; align-items: flex-end;">
                <button onclick="analyzeBloodPressure()" class="btn" style="width: 100%; border: none; cursor: pointer;">é–‹å§‹åˆ†æä¸¦å„²å­˜</button>
            </div>
        </div>

        <div id="resultArea" style="margin-top: 20px; display: none;">
            <div id="statusTag" style="display: inline-block; padding: 5px 15px; border-radius: 5px; color: white; font-weight: bold; margin-bottom: 10px;"></div>
            <div id="adviceBox" style="background: #fff3e0; border-left: 5px solid #ff9800; padding: 15px;">
                </div>
        </div>

        <h3 style="margin-top: 30px;">ğŸ—“ï¸ æœ€è¿‘äº”æ¬¡ç´€éŒ„</h3>
        <table style="width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 16px;">
            <thead>
                <tr style="background: #2A5C82; color: white;">
                    <th style="padding: 10px;">æ—¥æœŸ</th>
                    <th>æ•¸å€¼ (SYS/DIA)</th>
                    <th>ç‹€æ…‹</th>
                </tr>
            </thead>
            <tbody id="historyBody">
                </tbody>
        </table>
    </div>

    </div>

<script>
    let history = [];

    function analyzeBloodPressure() {
        const sys = parseInt(document.getElementById('sys').value);
        const dia = parseInt(document.getElementById('dia').value);

        if (isNaN(sys) || isNaN(dia)) {
            alert("è«‹è¼¸å…¥å®Œæ•´çš„è¡€å£“æ•¸å€¼");
            return;
        }

        let status = "";
        let color = "";
        let advice = "";

        // 1. æ•¸æ“šåˆ†æé‚è¼¯ (æ ¹æ“šå°ç£é«˜è¡€å£“å­¸æœƒæŒ‡å¼•)
        if (sys < 120 && dia < 80) {
            status = "æ­£å¸¸";
            color = "#27ae60";
            advice = "<strong>æ‚¨çš„è¡€å£“å¾ˆå®Œç¾ï¼</strong> å»ºè­°ç¶­æŒç›®å‰çš„å‡è¡¡é£²é£Ÿï¼Œä¸¦ä¿æŒè¦å¾‹é‹å‹•ã€‚å¯ä»¥å¤šæ”å–å…¨ç©€é›œç³§ï¼ˆå¦‚ç„ç±³ã€ç‡•éº¥ï¼‰ä¾†ç¶­æŒè¡€ç®¡å½ˆæ€§ã€‚";
        } else if ((sys >= 120 && sys < 130) && dia < 80) {
            status = "è¡€å£“å‡é«˜";
            color = "#f1c40f";
            advice = "<strong>æ³¨æ„å›‰ï¼è¡€å£“ç¨é«˜ã€‚</strong> å»ºè­°é–‹å§‹å¯¦æ–½ã€è¼•é¹½è¨ˆç•«ã€ï¼Œæ¸›å°‘å¤–é£Ÿæ²¾é†¬ï¼Œå¤šåƒå«é‰€è”¬èœï¼ˆå¦‚è èœã€ç©ºå¿ƒèœï¼‰å¹«åŠ©éˆ‰é›¢å­æ’å‡ºã€‚";
        } else if (sys >= 130 || dia >= 80) {
            status = "é«˜è¡€å£“å‰æœŸ/ç¬¬ä¸€æœŸ";
            color = "#e67e22";
            advice = "<strong>è«‹åŠ å¼·ç”Ÿæ´»ç®¡ç†ï¼</strong> å»ºè­°æ¡ç”¨å®Œæ•´çš„ DASH é£²é£Ÿï¼šæ¯æ—¥ 5+5 è”¬æœï¼Œä¸¦ä»¥ç™½è‚‰ï¼ˆé›ã€é­šï¼‰å–ä»£ç´…è‚‰ï¼Œæ¸›å°‘é£½å’Œè„‚è‚ªæ”å–ã€‚å»ºè­°ç´€éŒ„ä¸€é€± 722 æ•¸æ“šä¸¦è«®è©¢é†«å¸«ã€‚";
        }

        // 2. é¡¯ç¤ºåˆ†æçµæœ
        const resArea = document.getElementById('resultArea');
        const tag = document.getElementById('statusTag');
        const box = document.getElementById('adviceBox');
        
        resArea.style.display = "block";
        tag.textContent = status;
        tag.style.backgroundColor = color;
        box.innerHTML = `<h4>ğŸ’¡ å€‹äººåŒ–å»ºè­°ï¼š</h4>${advice}`;

        // 3. æ›´æ–°æ­·å²ç´€éŒ„
        const date = new Date().toLocaleDateString();
        history.unshift({ date, val: `${sys}/${dia}`, status, color });
        if (history.length > 5) history.pop(); // åƒ…ä¿ç•™æœ€è¿‘äº”æ¬¡

        updateHistoryTable();
    }

    function updateHistoryTable() {
        const body = document.getElementById('historyBody');
        body.innerHTML = history.map(item => `
            <tr style="border-bottom: 1px solid #ddd; text-align: center;">
                <td style="padding: 10px;">${item.date}</td>
                <td>${item.val}</td>
                <td style="color: ${item.color}; font-weight: bold;">${item.status}</td>
            </tr>
        `).join('');
    }
</script>